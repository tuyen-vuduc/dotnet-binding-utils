name: Android Binding Libraries
run-name: ${{ inputs.LIB_ARTIFACT }} ðŸš€ NuGet

on:
  workflow_dispatch:
    inputs:
      LIB_ARTIFACT:
        description: 'Android library to publish'
        required: true
        type: choice
        options:    
        - org.jetbrains.kotlinx:kotlinx-datetime:0.6.1
        - com.jakewharton.retrofit:retrofit2-kotlinx-serialization-converter:0.8.0
        - com.pusher:pusher-java-client:2.2.1 
        - org.java-websocket:Java-WebSocket:1.4.0
        - dev.chrisbanes.snapper:snapper:0.2.2
        - io.github.aakira:napier:1.4.1
        - org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.2
        - com.squareup.wire:wire-moshi-adapter:4.9.9
        - com.squareup.wire:wire-runtime-jvm:4.9.9
        - com.squareup.wire:wire-runtime:4.9.9
        - org.jetbrains.kotlin:kotlin-parcelize-runtime:1.9.24
        - dev.zacsweers.redacted:redacted-compiler-plugin-annotations:1.8.0
        - com.squareup.tape2:tape:2.0.0-beta1
        - org.kamranzafar:jtar:2.3
        - com.scottyab:rootbeer-lib:0.1.0
        - com.neovisionaries:nv-i18n:1.29
        - com.jaredrummler:android-device-names:1.1.9
        - io.getstream:stream-chat-android-client:6.4.0
        - io.github.sceneview:sceneview:2.2.1
        - io.github.sceneview:arsceneview:2.2.1

jobs:
  build-then-publish:
    uses: ./.github/workflows/reusable-android-build.yml
    with:
      artifact: ${{ inputs.LIB_ARTIFACT }}
      dotnet-version: '9.0'
      java-version: '21'
      requires-mapbox-token: false
      requires-drivesmart-credentials: false
    secrets:
      NUGET_PUSH_API_KEY: ${{ secrets.NUGET_PUSH_API_KEY }}